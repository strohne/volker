---
title: "All kinds of statistics: effect sizes, parameter estimates, p values"
output: volker::html_report
vignette: >
  %\VignetteIndexEntry{Effects}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

```{r include=FALSE}
knitr::opts_chunk$set(echo = F)

library(tidyverse)
library(volker)
```

```{r}

# Load data 
data <- volker::chatgpt
```

| \#      | function                     | implemented | effect calculations                                                   |
|---------|------------------------------|-------------|-----------------------------------------------------------------------|
| 1       | effect_counts_one            | not yet     | Compare to equality. Gini Coefficient, Goodness of fit, ci of proportions |
| 2       | effect_counts_one_grouped    |             | Cramér's V, Chi squared, ci of proportions                            |
| 3       | effect_counts_one_cor        | not yet     | D (Logistic Regression)                                               |
| 4       | effect_counts_items          | not yet     | Cramér's V between all items                                          |
| 5       | effect_counts_items_grouped  | not yet     | Cramér's V between items and grouping variable                        |
| 6       | effect_counts_items_cor      | not yet     | D between each item an the correlation variable (Logistic Regression) |
| 7       | effect_metrics_one           | not yet     | Compare to normality. Shapiro-Wilk-Normality-test                     |
| 8       | effect_metrics_one_grouped   |             | R squared, t-test, ci of means                                        |
| 9       | effect_metrics_one_cor       |             | Pearson's r, Spearman's rho, t-test                                   |
| 10      | effect_metrics_items         |             | R squared, ci of means, t-test                                        | 
| 11      | effect_metrics_items_grouped | not yet     | R squared between each item and the grouping variable                 |
| 12      | effect_metrics_items_cor     |             | Pearson's r, Spearman's rho, t-test                                   |

# 1. Inequality of counts (Chi-squared test for equal distribution, Gini-coefficient)
```{r}
data %>%  
  filter(sd_gender != "diverse") |> 
  effect_counts(sd_gender)
```

# 2. Cross table
```{r}
effect_counts(data, adopter, sd_gender)
```

# 3. Logistic regression with one metric predictor
```{r}
# TODO: better way? ; add macro statistics ; make clean ; remove new package...? 
effect_counts(data, adopter, sd_age, metric = TRUE)
```


# 4. Chi-square goodness-of-fit test for each item
```{r}
# TODO: good method? 
effect_counts(data, starts_with("cg_adoption_advantage"))
```

# 7. Normality test for one metric variable
```{r}
# TODO: test wheter mean is different from zero? 
effect_metrics(data, sd_age)
```

# 8. T-test / ANOVA
```{r}
effect_metrics(data, sd_age, adopter)
```

# 9. Correlation test
```{r}
effect_metrics(data, sd_age, use_private, metric=T)
```

# 10. Correlation within items
```{r}
effect_metrics(data, starts_with("cg_adoption"))
```

# 11. Analysis of variance 
```{r}
# TODO: Check calculation 
effect_metrics(data, starts_with("cg_adoption_"), adopter)
```

# 12. Correlation between items and one variable
```{r}
effect_metrics(data, starts_with("cg_adoption"), sd_age, metric = TRUE)
```
